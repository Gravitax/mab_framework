const r=e=>{window.setTimeout(()=>{e.style.display="flex"},500),e.setAttribute("aria-hidden","false")},d=async function(e){const t="#"+e.split("#")[1],o=await fetch(e).then(l=>l.text()),a=document.createRange().createContextualFragment(o).querySelector(t);return a&&a.classList.contains("mab_modal")&&!document.querySelector(t)&&(s(a),document.body.append(a)),a},i=async function(e){e.preventDefault();const t=e.target;let o=t&&t.getAttribute("data-href"),n;o&&(o.startsWith("#")?n=document.querySelector(o):(n=await d(o),o="#"+o.split("#")[1],t.setAttribute("data-href",o)),n&&r(n))},m=e=>{switch(e.id){case"mab_lightbox--modal":const t=e.querySelectorAll(".mab_slider__element");t&&t.forEach(n=>n.remove());break;case"mab_slider__fullscreen--modal":let o=e.querySelector(".mab_slider");o&&o.remove(),o=e.querySelector(".splide");for(const n of Object.keys(window.splide_tmp))window.splide_tmp[n].destroy("completely");o&&o.remove();break}},c=e=>{window.setTimeout(()=>{e.style.display="none",m(e)},500),e.setAttribute("aria-hidden","true")},u=()=>{const e=document.querySelectorAll(".mab_modal__open");e.length>0&&(e.forEach(t=>{t.addEventListener("click",i)}),window.addEventListener("keydown",t=>{if(t.key==="Escape"||t.key==="Esc"){const o=document.querySelectorAll(".mab_modal");o&&o.forEach(n=>{c(n)})}}))},s=e=>{const t=document.createElement("span");t.className="mab_modal__close",t.addEventListener("click",o=>{o.preventDefault(),c(e)}),e.prepend(t),e.addEventListener("click",o=>{o.preventDefault(),o.target==e&&c(e)})},_=e=>{const t=document.createElement("div");return t.id=e,t.className="mab_modal",t.setAttribute("aria-hidden","true"),s(t),document.body.append(t),t},f=()=>{const e=document.querySelectorAll(".mab_modal");e&&e.forEach(t=>{s(t)}),u()};export{_ as create_modal,f as default,c as hide_modal,s as init_modal__close,d as load_modal,i as open_modal,r as show_modal};
